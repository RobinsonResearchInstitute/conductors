<!DOCTYPE html>
<meta charset="utf-8">
<head>
<script src="//d3js.org/d3.v3.min.js"></script>    
<style>

    body {
        font: 20px "Helvetica Neue", Helvetica, Arial, sans-serif;
        background-color: black;
    }

    h1{
        color:white;
    }

    svg{
        margin-left:auto;
        margin-right:auto;
        display:block;
    }

    .content {
  position: fixed;
  bottom: 0;
  background: rgba(0, 0, 0, 0.0);
  color: #f1f1f1;
  width: 100%;
  padding: 20px;
}


    .axis path,
    .axis line {
        fill: none;
        stroke: white;
        shape-rendering: crispEdges;
    }

    .axis text{
        fill: white;
    }

   

    .line {
        fill: none;
        stroke-width: 1.5px;
    }

    .overlay {
        fill: none;
        pointer-events: all;
    }

    .focus circle {
        fill: orange;
    }

    .focus text {
        font-size: 14px;
    }

    .tooltip {
        fill: white;
        stroke: #000;
    }

    .tooltip-year, .tooltip-Tc {
        font-weight: bold;
    }

    .credit {
        color: #9E9E9E;
    font-size: 10px;
    margin-bottom: 10px;
    text-align:right;
    }

</style>
</head>
<body>
    <h1>The Rise of Superconductivity</h1>

<script>

var w = window.innerWidth,
          h = window.innerHeight;

    var margin = { top: 30, right: 120, bottom: 80, left: 100 },
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom,
        tooltip = { width: 100, height: 100, x: 10, y: -30 };

    var radius = 6;    

    
    var bisectDate = d3.bisector(function(d) { return d.year; }).left;

    var x = d3.time.scale()
            .range([0, width]);

    var y = d3.scale.linear()
            .range([height, 0]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom")
        .tickFormat(d3.format("r"));

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left")
        .tickFormat(d3.format("s"))

    var line = d3.svg.line()
        .x(function(d) { return x(d.year); })
        .y(function(d) { return y(d.Tc); });

          // We're passing in a function in d3.max to tell it what we're maxing (x value)
          var xScale = d3.scale.linear()
          .domain([1910, 2020])
          .range([margin.left, w - margin.right]);  // Set margins for x specific

      // We're passing in a function in d3.max to tell it what we're maxing (y value)
      var yScale = d3.scale.linear()
          .domain([0, 300])
          .range([margin.top, h - margin.bottom]);  // Set margins for y specific

    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



    

         var datasets = [
            {
                "category": "Elements",
                "data":[
                    {"year": 1911, "Tc": 4.2, "name": "Hg"},
                    {"year": 1913, "Tc": 4.2, "name": "Hg"},
                    {"year": 1913, "Tc": 7.2, "name": "Pb"},
                    {"year": 1932, "Tc": 7.2, "name": "Pb"},
                    {"year": 1932, "Tc": 11.5, "name": "NbC"},
                    {"year": 1941, "Tc": 11.5, "name": "NbC"},
                    {"year": 1941, "Tc": 16.1, "name": "NbN"},
                    {"year": 1953, "Tc": 16.1, "name": "NbN"},
                    {"year": 1953, "Tc": 17.1, "name": "V3Si"},
                    {"year": 1954, "Tc": 17.1, "name": "V3Si"},
                    {"year": 1954, "Tc": 18.05, "name": "Nb3Sn"},
                    {"year": 1967, "Tc": 18.05, "name": "Nb3Sn"},
                    {"year": 1967, "Tc": 20.7, "name": "NbGeAl"},
                    {"year": 1974, "Tc": 20.7, "name": "NbGeAl"},
                    {"year": 1986, "Tc": 20.7, "name": "NbGeAl"},
                    {"year": 1989, "Tc": 20.7, "name": "NbGeAl"},
                    {"year": 1989, "Tc": 32, "name": "BaKBiO"},
                    {"year": 2001, "Tc": 32, "name": "BaKBiO"},
                    {"year": 2001, "Tc": 39, "name": "MgB2"},
                    
                ]
            },
            {
                "category": "Cuprates",
                "data":[
                    {"year": 1986, "Tc": 30, "name": "LaBaCuO"},
                    {"year": 1987, "Tc": 30, "name": "LaBaCuO"},
                    {"year": 1987, "Tc": 93, "name": "YBaCuO"},
                    {"year": 1988, "Tc": 93, "name": "YBaCuO"},
                    {"year": 1988, "Tc": 120, "name": "TlBaCaCuO"},
                    {"year": 1993, "Tc": 120, "name": "TlBaCaCuO"},
                    {"year": 1993, "Tc": 133, "name": "HgBaCaCuO"},
                    {"year": 1995, "Tc": 133, "name": "HgBaCaCuO"},
                    {"year": 1995, "Tc": 138, "name": "HgTlBaCaCuO"},
                ]
            },
            {
                "category": "Carbon",
                "data":[
                    {"year": 1991, "Tc": 19.3, "name": "K3C60"},
                    {"year": 1991, "Tc": 33, "name": "RbCs2C60"},
                   
                ]
            },
            {
                "category": "Pnictides",
                "data":[
                    {"year": 2008, "Tc": 26, "name": "LaFeAsOF"},
                    {"year": 2008, "Tc": 55, "name": "SmFeAsOF"},
                   
                ]
            },
            {
                "category": "Aromatics",
                "data":[
                    {"year": 2010, "Tc": 18, "name": "C22H14"},
                    {"year": 2012, "Tc": 18, "name": "C22H14"},
                    {"year": 2012, "Tc": 33, "name": "C30H18"},
                   
                ]
            },
            {
                "category": "Hydrides",
                "data":[
                    {"year": 2015, "Tc": 203, "name": "H3S"},
                    {"year": 2019, "Tc": 203, "name": "H3S"},
                    {"year": 2019, "Tc": 250, "name": "H10La"},
                    {"year": 2020, "Tc": 250, "name": "H10La"},
                    {"year": 2020, "Tc": 287.7, "name": "C-S-H"},
                   
                ]
            }
        ];

        var colors = ["#46a6f5","#FF0000","#FF00FF","#00FF00","#FFFF00","#46a6f5"]
        
        //https://physics.info/condensed-matter/

        var datapoints = 
            [{"year": 1911, "Tc": 4.2, "name": "Hg", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1913, "Tc": 7.2, "name": "Pb", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1932, "Tc": 9.25, "name": "Nb", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1932, "Tc": 11.5, "name": "NbC", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1941, "Tc": 16.1, "name": "NbN", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1953, "Tc": 17.1, "name": "V3Si", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1954, "Tc": 18.05, "name": "Nb3Sn", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1967, "Tc": 20.7, "name": "NbAlGe", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1974, "Tc": 23.2, "name": "Nb3Ge", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1986, "Tc": 30, "name": "LaBaCuO", "color":colors[1],"fillcolor":colors[1]},
            {"year": 1987, "Tc": 93, "name": "YBaCuO", "color":colors[1],"fillcolor":colors[1]},
            {"year": 1988, "Tc": 105, "name": "BiSrCaCuO", "color":colors[1],"fillcolor":colors[1]},
            {"year": 1988, "Tc": 120, "name": "TlBaCaCuO", "color":colors[1],"fillcolor":colors[1]},
            {"year": 1989, "Tc": 32, "name": "BaKBiO", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1991, "Tc": 19.3, "name": "K3C60", "color":colors[2],"fillcolor":colors[2]},
            {"year": 1991, "Tc": 33, "name": "RbCs2C60", "color":colors[2],"fillcolor":colors[2]},
            {"year": 1993, "Tc": 133, "name": "HgBaCaCuO", "color":colors[1],"fillcolor":colors[1]},
            {"year": 1994, "Tc": 23, "name": "YPd2B2C", "color":colors[0],"fillcolor":colors[0]},
            {"year": 1994, "Tc": 164, "name": "HgBaCaCuO", "color":colors[1],"fillcolor":"white"},
            {"year": 1995, "Tc": 138, "name": "HgTlBaCaCuO", "color":colors[1],"fillcolor":colors[1]},
            {"year": 1995, "Tc": 38, "name": "Cs3C60", "color":colors[2],"fillcolor":"white"},
            {"year": 2001, "Tc": 39, "name": "MgB2", "color":colors[0],"fillcolor":colors[0]},
            {"year": 2008, "Tc": 26, "name": "LaFeAsOF", "color":colors[3],"fillcolor":colors[3]},
            {"year": 2008, "Tc": 38, "name": "BaKFeAs", "color":colors[3],"fillcolor":colors[3]},
            {"year": 2008, "Tc": 55, "name": "SmFeAsOF", "color":colors[3],"fillcolor":colors[3]},
            {"year": 2010, "Tc": 18, "name": "KxC22H14", "color":colors[4],"fillcolor":colors[4]},
            {"year": 2012, "Tc": 33, "name": "KxC30H18", "color":colors[4],"fillcolor":colors[4]},
            {"year": 2015, "Tc": 203, "name": "H3S", "color":colors[0],"fillcolor":"white"},
            {"year": 2019, "Tc": 250, "name": "H10La", "color":colors[0],"fillcolor":"white"},
            {"year": 2020, "Tc": 287.7, "name": "C-S-H", "color":colors[0],"fillcolor":"white"}
        ];

    //add a function to calculate axis limits automatically
    x.domain([1900, 2020]);
    y.domain([0,300]);

    svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis)
            .append("text")             
            .attr("transform",
                "translate(" + (width/2) + " ," + 
                           (0*height + 0*margin.top + 60) + ")")
            .style("text-anchor", "middle")
            .text("Year");


        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 0-margin.left)
            .attr("x", 0-height/2)
            .attr("dy", "1.5em")
            .style("text-anchor", "middle")
            .text("Critical Temperature (K)");


    //draw the lines
    datasets.forEach(function(dataset, i) {  
        dataset.data.forEach(function(d) {
            d.Tc = +d.Tc;
        });
        
       
        svg.append("path")
            .datum(dataset.data)
            .attr("class", "line")
            .attr("stroke", colors[i])
            .attr("d", line);
       

         

        
    } );


     // Add the points
     svg
      .append("g")
      .selectAll("dot")
      .data(datapoints)
      .enter()
      .append("circle")
        .attr("cx", function(d) { return x(d.year) } )
        .attr("cy", function(d) { return y(d.Tc) } )
        .attr("r", 5)
        .attr("stroke",function(d) { return d.color })  
        .attr("fill", function(d) { return d.fillcolor })
        .on("mouseover", handleMouseOver)
        .on("mouseout", handleMouseOut);
        


        var focus = svg.append("g")
            .attr("class", "focus")
            .style("display", "none");
        
        focus.append("rect")
            .attr("class", "tooltip")
            .attr("width", 110)
            .attr("height", 50)
            .attr("x", 10)
            .attr("y", -22)
            .attr("rx", 4)
            .attr("ry", 4);

        focus.append("text")
            .attr("class", "tooltip-year")
            .attr("x", 18)
            .attr("y", -2);

        focus.append("text")
            .attr("x", 18)
            .attr("y", 18)
            .text("Tc:");

        focus.append("text")
            .attr("class", "tooltip-Tc")
            .attr("x", 50)
            .attr("y", 18);

        

        
        // Create Event Handlers for mouse
      function handleMouseOver(d, i) {  // Add interactivity

        // Use D3 to select element, change color and size
        
        d3.select(this).attr({
        fill: "orange",
        //r: radius * 2
        });
        
        focus.style("display", null);
        focus.attr("transform", "translate(" + x(d.year) + "," + y(d.Tc) + ")");
            focus.select(".tooltip-year").text(d.name);
            focus.select(".tooltip-Tc").text(d.Tc+" K");

        }

function handleMouseOut(d, i) {
    // Use D3 to select element, change color back to normal
    
    d3.select(this).attr({
    fill: d.fillcolor,
    //r: radius
    });
    
    focus.style("display", "none"); 

    }
        
   

</script>
<div class="content">
    <p>The discovery of superconductors that operate at higher temperatures follows an unpredictable path. They can be grouped into <span style="color: #46a6f5">conventional</span>, <span style="color: #ff0000">cuprate high-temperature</span>, <span style="color: #ff00ff">carbon-based</span>, <span style="color: #00ff00">iron-based high-temperature</span> and <span style="color: #ffff00">polycyclic hydrocarbon</span> superconductors. White-filled symbols denote materials that become superconductors at extreme pressures. (Mouseover points for information.)</p>
  </div>
  

<div class="credit">By J.G. Storey </div>
 
</body>
